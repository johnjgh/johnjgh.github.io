<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Johnjgh&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Johnjgh&#39;s blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Johnjgh&#39;s blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Johnjgh's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Johnjgh's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/12/逆向某国内著名短视频app，实现视频数据爬取/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/12/逆向某国内著名短视频app，实现视频数据爬取/" itemprop="url">逆向某国内著名短视频app，实现视频数据爬取</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-12T13:53:48+08:00">
                2020-02-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>问题：通过抓包调试我们可以发现，在每次请求时服务器会在请求头验证<code>x-gorgon</code>和<code>x-khronos</code>字段，如果验证不通过，服务器不会返回数据。</p>
<h2 id="1、定位加密位置"><a href="#1、定位加密位置" class="headerlink" title="1、定位加密位置"></a>1、定位加密位置</h2><p>首先下载apk文件，然后用jadx反编译（可能需要安装java环境），反编译成功后，我们需要定位到加密函数的位置。</p>
<h2 id="2、分析加密函数"><a href="#2、分析加密函数" class="headerlink" title="2、分析加密函数"></a>2、分析加密函数</h2><p>点击界面中的魔法棒，全局搜索<code>x-gorgon</code>可以发现加密部分在<code>com.ss.sys.ces.gg.tt</code>的<code>init_gorgon</code>函数中，通过分析<code>java</code>代码可以知道，<code>x-gorgon</code>是调用<code>leviathan</code>函数生成的，而该函数在native层的，其加密逻辑在<code>libcms.so</code>文件中，传入<code>leviathan</code>中的是当前时间的时间戳和一个<code>bytes</code>数组，而这个<code>byte</code>数组也是一个128位字符串调用算法生成的，这个时间戳也是<code>x-khronos</code>的值。<br><img src="/images/gorgon.png" alt="gorgon"></p>
<h2 id="3、生成128位字符串"><a href="#3、生成128位字符串" class="headerlink" title="3、生成128位字符串"></a>3、生成128位字符串</h2><p>这个128位字符串是由<code>a2，str3，str4，str5</code>四个变量拼接成的，<code>a2</code>是整个<code>url</code>的<code>md5</code>，<code>str3</code>是提交的数据的<code>md5</code>，<code>str4</code>是<code>cookie</code>值的<code>md5</code>，<code>str5</code>是<code>cookie</code>中从<code>sessionid=</code>之后到结束的字符串的<code>md5</code>，事实上<code>str4</code>和<code>str5</code>可以用32个0来表示，<code>str3</code>只有在<code>post</code>请求时需要生成，其它如<code>get</code>请求时也可以用32个0表示。</p>
<h2 id="4、生成传入so文件中加密函数内的byte数组"><a href="#4、生成传入so文件中加密函数内的byte数组" class="headerlink" title="4、生成传入so文件中加密函数内的byte数组"></a>4、生成传入so文件中加密函数内的byte数组</h2><p>但是这个128位字符串是如何变成一个<code>byte</code>数组的呢，这里调用了<code>com.ss.a.b</code>下的a函数生成，其算法用<code>python</code>实现如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def generate(a):</span><br><span class="line">    w = []</span><br><span class="line">    for i in range(0, len(a), 2):</span><br><span class="line">        bin_str = bin(int(a[i], 16))[2:] + &apos;0000&apos;</span><br><span class="line">        if len(bin_str) &lt; 8:</span><br><span class="line">            bin_str = &apos;0&apos;*(8-len(bin_str)) + bin_str</span><br><span class="line">        if bin_str.startswith(&apos;1&apos;):</span><br><span class="line">            w.append(-(int(&apos;&apos;.join([&apos;0&apos; if int(k) else &apos;1&apos; for k in bin_str]), 2) + 1) + int(a[i + 1], 16))</span><br><span class="line">        else:</span><br><span class="line">            w.append(int(bin_str, 2) + int(a[i + 1], 16))</span><br><span class="line">    return w</span><br></pre></td></tr></table></figure></p>
<h2 id="5、模拟运行环境加载so文件进行加密"><a href="#5、模拟运行环境加载so文件进行加密" class="headerlink" title="5、模拟运行环境加载so文件进行加密"></a>5、模拟运行环境加载so文件进行加密</h2><p>接下来就是<code>leviathan</code>函数的实现，由于是在<code>native</code>层中实现加密，且有反调试措施，所以目前只能通过调用<code>so</code>文件来实现加密，这里我使用的是<code>GitHub</code>中的一个开源项目<code>AndroidEmu</code>来模拟运行环境并加载<code>so</code>文件，然后使用<code>python</code>调用<code>leviathan</code>函数，传入时间戳和<code>byte</code>数组得到加密结果，此结果即为<code>x-gorgon</code>的值。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/13/python-js逆向破解12306网站并获取cookie字段RAIL-DEVICEID/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/11/13/python-js逆向破解12306网站并获取cookie字段RAIL-DEVICEID/" itemprop="url">python-js逆向破解12306网站并获取cookie字段RAIL_DEVICEID</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-13T10:53:15+08:00">
                2019-11-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>python</code>模拟登录12306时必须要有的一个<code>cookie</code>参数就是<code>RAIL_DEVICEID</code>，否则是登录不成功的，那么这个<code>RAIL_DEVICEID</code>是从哪里来的呢？下面我们来一步步分析。</p>
<h2 id="1、RAIL-DEVICEID如何获取"><a href="#1、RAIL-DEVICEID如何获取" class="headerlink" title="1、RAIL_DEVICEID如何获取"></a>1、RAIL_DEVICEID如何获取</h2><p>首先可以用chrome浏览器打开12306网站，先清空浏览器的缓存，打开开发者工具，然后刷新，找到<code>RAIL_DEVICEID</code>的值，再全局搜索，可以发现这个值是服务器返回的，所以我们应该分析<code>ajax</code>请求的<code>url</code>是如何生成的。</p>
<h2 id="2、定位ajax请求在JS的位置"><a href="#2、定位ajax请求在JS的位置" class="headerlink" title="2、定位ajax请求在JS的位置"></a>2、定位ajax请求在JS的位置</h2><p>在知道这个<code>ajax</code>请求的url之后，可以全局搜索url中的关键字段，例如<code>HttpZF/logdevice</code>这部分（需一点点尝试），此时可以发现在<code>GetJS</code>这个文件中找到了这部分url字段，那么我们就已经定位到js生成url的位置了。</p>
<h2 id="3、分析url请求链接的拼接字段"><a href="#3、分析url请求链接的拼接字段" class="headerlink" title="3、分析url请求链接的拼接字段"></a>3、分析url请求链接的拼接字段</h2><p>接下来，我们来分析这个<code>url</code>是如何拼接成的，从<code>js</code>中扒下来的url拼接代码是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"https://kyfw.12306.cn/otn/HttpZF/logdevice"</span> + (<span class="string">"?algID\x3dBikJbiWz0u\x26hashCode\x3d"</span> + e + a)</span><br></pre></td></tr></table></figure>
<p>这里总共是四个部分，第一部分是固定不变的，第二部分是每次请求获取GetJS文件时服务器返回的，也就是会变的，可以从<code>GetJS</code>文件中提取（其中<code>\x3d</code>是”=”，<code>\x26</code>是”&amp;”），第三部分和第四部分都是js生成的，可以通过断点调试找到它们的生成过程。</p>
<h2 id="4、url中e和a如何生成"><a href="#4、url中e和a如何生成" class="headerlink" title="4、url中e和a如何生成"></a>4、url中e和a如何生成</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="string">""</span>, e = <span class="string">""</span>, g = c.getpackStr(b), k = [], q = [], t = [], l = [], p = <span class="number">0</span>; p &lt; g.length; p++)</span><br><span class="line">    <span class="string">"new"</span> != g[p].value &amp;&amp; <span class="number">-1</span> == Eb.indexOf(g[p].key) &amp;&amp; (<span class="number">-1</span> != Bb.indexOf(g[p].key) ? q.push(g[p]) : <span class="number">-1</span> != Db.indexOf(g[p].key) ? t.push(g[p]) : <span class="number">-1</span> != Cb.indexOf(g[p].key) ? l.push(g[p]) : k.push(g[p]));</span><br><span class="line">g = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> (p = <span class="number">0</span>; p &lt; q.length; p++)</span><br><span class="line">    g = g + q[p].key.charAt(<span class="number">0</span>) + q[p].value;</span><br><span class="line">q = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> (p = <span class="number">0</span>; p &lt; l.length; p++)</span><br><span class="line">    q = <span class="number">0</span> == p ? q + l[p].value : q + <span class="string">"x"</span> + l[p].value;</span><br><span class="line">l = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> (p = <span class="number">0</span>; p &lt; t.length; p++)</span><br><span class="line">    l = <span class="number">0</span> == p ? l + t[p].value : l + <span class="string">"x"</span> + t[p].value;</span><br><span class="line">k.push(<span class="keyword">new</span> n(<span class="string">"storeDb"</span>,g));</span><br><span class="line">k.push(<span class="keyword">new</span> n(<span class="string">"srcScreenSize"</span>,q));</span><br><span class="line">k.push(<span class="keyword">new</span> n(<span class="string">"scrAvailSize"</span>,l));</span><br><span class="line"><span class="string">""</span> != d &amp;&amp; k.push(<span class="keyword">new</span> n(<span class="string">"localCode"</span>,pb(d)));</span><br><span class="line">e = c.hashAlg(k, a, e);</span><br><span class="line">a = e.key;</span><br><span class="line">e = e.value;</span><br><span class="line">a += <span class="string">"\x26timestamp\x3d"</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>).getTime();</span><br><span class="line">$a.getJSON(<span class="string">"https://kyfw.12306.cn/otn/HttpZF/logdevice"</span> + (<span class="string">"?algID\x3dBikJbiWz0u\x26hashCode\x3d"</span> + e + a), <span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</span><br></pre></td></tr></table></figure>
<p>上面是生成e和a的js代码，其实就在<code>url</code>拼接的上面，这里可以看到，<code>e</code>和<code>a</code>分别对应另一个变量的<code>value</code>和<code>key</code>，而这个变量是调用<code>c.hashAlg</code>方法生成，传入了<code>k，a，e</code>这三个值，通过断点或者观察代码，可以发现其实<code>a</code>和<code>e</code>都是空字符串，所以只要得到<code>k</code>的值即可，这里我们可以将这一段代码扒下来，封装成一个函数，把最终的<code>url</code>赋值给一个变量，然后返回，用<code>python</code>执行这段代码，就可以得到<code>url</code>了。但是，这里有几个外部变量和外部函数，我们要如何去拿到它们呢？</p>
<h2 id="5、分析外部变量和外部函数"><a href="#5、分析外部变量和外部函数" class="headerlink" title="5、分析外部变量和外部函数"></a>5、分析外部变量和外部函数</h2><p>在封装成函数后，这里需要得到的是<code>c.getpackStr</code>和<code>c.hashAlg</code>以及<code>n，pb</code>这四个函数和<code>d，Eb，Bb，Db，Cb</code>这五个变量，我们来一一分析它们，先分析<code>n，pb</code>这两个函数，可以通过断点调试找到它们，只要把它们拿出来添加到<code>js</code>代码中即可，可以直接调用，这里不多赘述；<code>d</code>是在前面赋值的，调试后可发现它其实是本地局域网的<code>ip</code>地址，可以写死；<code>Eb，Bb，Db，Cb</code>是不变的，同样可以写死；而<code>c.getpackStr</code>通过断点调试，可以发现它最终返回的是一个数组，其中每个元素都是通过n函数得到的一个实例对象，而且这些都是浏览器的相关信息，因此我们可以猜测它是不变，返回值赋值给g变量，此时我们可以通过断点拿到<code>g</code>的值，然后在代码中写死这个<code>g</code>变量。<br>注：这里<code>g</code>变量中有一个<code>cookieCode</code>的值是一段字符串，这其实是个坑，这个值就是在第一步中服务器返回的，有可能你看了发现并没有，那是因为只要<code>g</code>变量中有这个值，那么服务器就不返回该值，所以这个在最开始是并没有值的，此时返回的内容就会有这个值，因此我们可以直接将这个值删除。</p>
<h2 id="6、调用hashAlg函数执行加密"><a href="#6、调用hashAlg函数执行加密" class="headerlink" title="6、调用hashAlg函数执行加密"></a>6、调用hashAlg函数执行加密</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">hashAlg: <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    a.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> c, d;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"object"</span> === <span class="keyword">typeof</span> a &amp;&amp; <span class="string">"object"</span> === <span class="keyword">typeof</span> b &amp;&amp; a &amp;&amp; b)</span><br><span class="line">            <span class="keyword">return</span> c = a.key,</span><br><span class="line">            d = b.key,</span><br><span class="line">            c === d ? <span class="number">0</span> : <span class="keyword">typeof</span> c === <span class="keyword">typeof</span> d ? c &lt; d ? <span class="number">-1</span> : <span class="number">1</span> : <span class="keyword">typeof</span> c &lt; <span class="keyword">typeof</span> d ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">"error"</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> d = <span class="number">0</span>; d &lt; a.length; d++) &#123;</span><br><span class="line">        <span class="keyword">var</span> e = a[d].key.replace(<span class="built_in">RegExp</span>(<span class="string">"%"</span>, <span class="string">"gm"</span>), <span class="string">""</span>)</span><br><span class="line">          , f = <span class="string">""</span></span><br><span class="line">          , f = <span class="string">"string"</span> == <span class="keyword">typeof</span> a[d].value ? a[d].value.replace(<span class="built_in">RegExp</span>(<span class="string">"%"</span>, <span class="string">"gm"</span>), <span class="string">""</span>) : a[d].value;</span><br><span class="line">        <span class="string">""</span> !== f &amp;&amp; (c += e + f,</span><br><span class="line">        b += <span class="string">"\x26"</span> + (<span class="keyword">void</span> <span class="number">0</span> == gb[e] ? e : gb[e]) + <span class="string">"\x3d"</span> + f)</span><br><span class="line">    &#125;</span><br><span class="line">    a = R.SHA256(c).toString(R.enc.Base64);</span><br><span class="line">    c = a.length;</span><br><span class="line">    d = a.split(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">for</span> (e = <span class="number">0</span>; e &lt; <span class="built_in">parseInt</span>(c / <span class="number">2</span>); e++)</span><br><span class="line">        <span class="number">0</span> == e % <span class="number">2</span> &amp;&amp; (f = a.charAt(e),</span><br><span class="line">        d[e] = d[c - <span class="number">1</span> - e],</span><br><span class="line">        d[c - <span class="number">1</span> - e] = f);</span><br><span class="line">    a = d.join(<span class="string">""</span>);</span><br><span class="line">    c = a.length;</span><br><span class="line">    d = <span class="string">""</span>;</span><br><span class="line">    d = <span class="number">0</span> == a.length % <span class="number">2</span> ? a.substring(c / <span class="number">2</span>, c) + a.substring(<span class="number">0</span>, c / <span class="number">2</span>) : a.substring(c / <span class="number">2</span> + <span class="number">1</span>, c) + a.charAt(c / <span class="number">2</span>) + a.substring(<span class="number">0</span>, c / <span class="number">2</span>);</span><br><span class="line">    a = Qa(d);</span><br><span class="line">    c = Qa(a);</span><br><span class="line">    c = R.SHA256(c).toString(R.enc.Base64);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> n(b,c)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><code>c.hashAlg</code>才是<code>js</code>加密的重头戏，上面是通过断点调试得到的<code>hashAlg</code>的函数，这里就是生成url加密部分的代码，我们同样把它扒下来封装成函数添加到刚刚的js代码中，老办法，找外部函数或变量，这里传进来的就是第4步中的<code>k，a，e</code>，只要在js代码中调用这个<code>hashAlg</code>即可，然后就是<code>R.SHA256，R.enc.Base64</code>以及<code>gb，Qa，n，gb</code>也是一个固定不变的字典，所以可以写死，Qa可以直接扒下来添加到代码中调用，n在第5步已经添加了；而<code>R.SHA256</code>和<code>R.enc.Base64</code>是两个加密算法，可以下载<code>CryptoJS</code>，然后将这两个算法的代码复制粘贴到我们的js代码中，将这里<code>R</code>替换成<code>CryptoJS</code>即可，这里提供<code>CryptoJS</code>文件的下载地址：<br><a href="https://code.google.com/archive/p/crypto-js/downloads" target="_blank" rel="noopener">https://code.google.com/archive/p/crypto-js/downloads</a><br><em>注：需要科学上网</em></p>
<h2 id="7、如何处理返回的动态JS加密算法"><a href="#7、如何处理返回的动态JS加密算法" class="headerlink" title="7、如何处理返回的动态JS加密算法"></a>7、如何处理返回的动态JS加密算法</h2><p>这里基本上我们的js代码已经处理完成了，可以直接使用<code>python</code>的<code>execjs</code>执行<code>js</code>语句，调用函数，获得url，再使用url去获取<code>RAIL_DEVICEID</code>的值，但是，这里有一个问题，其它的js代码都是不变，而在第6步中的<code>hashAlg</code>函数中，其中的加密算法是会变的，在<code>for</code>循环结束后到<code>return</code>之间的内容是变化，而且<code>Qa</code>也会随之变化，那么如何根据这个变化来随时变换<code>js</code>代码，我是通过搜索，定位，抠取代码，然后拼接来解决这个问题，但是这里由于某些原因，不便将具体思路分享出来。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/15/Ubuntu18-04-1下通过uwsgi和nginx部署django项目并连接mysql数据库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/15/Ubuntu18-04-1下通过uwsgi和nginx部署django项目并连接mysql数据库/" itemprop="url">'Ubuntu18.04.1下通过uwsgi和nginx部署django项目并连接mysql数据库'</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-15T09:52:20+08:00">
                2019-04-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>uwsgi（python的一个包）在访问过程中起到桥梁的作用，它可以连接nginx和django，而nginx可以直接处理所有的静态请求（如静态文件等），所有的非静态请求则通过uwsgi传递给django，django接收请求并进行逻辑处理以及和mysql数据库交互，将得到的网页文件或数据包通过uwsgi返回给nginx，nginx再返回给浏览器。<br>这里我的项目下载地址为：<a href="https://github.com/johnjgh/project/tree/ubuntu" target="_blank" rel="noopener">https://github.com/johnjgh/project/tree/ubuntu</a> ，将项目放到<code>/home</code>目录下。</p>
<h2 id="安装并配置nginx"><a href="#安装并配置nginx" class="headerlink" title="安装并配置nginx"></a>安装并配置nginx</h2><p>首先，在Ubuntu系统下打开终端，输入<code>sudo su</code>进入root用户模式下（需要密码），然后输入<code>apt-get -y update</code>  -y参数表示确认安装，不会提示是否确认，apt是Ubuntu系统的包管理器。然后，再次输入<code>apt-get install -y nginx</code>即可安装nginx。安装完成后打开<code>/etc/nginx/nginx.conf</code>文件（可以使用vim命令打开，需要命令行输入<code>apt-get install -y vim</code>安装，安装完成后直接在命令行输入<code>vim /etc/nginx/nginx.conf</code>即可打开文件，基本操作：打开后按键盘的i键可以进入编辑模式，按Esc键退出编辑模式，输入:wq保存并退出，:q!不应用更改退出），修改端口号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       8088;    # 修改端口号</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #charset UTF-8; </span><br><span class="line"></span><br><span class="line">    #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>nginx常用命令：</p>
<pre><code>service nginx start    启动
service nginx stop     停止
service nginx restart  重启
</code></pre><p>默认端口号是80，但是80端口很容易被其它程序占用，这里我们将其更改为8088。修改完使用命令<code>service nginx start</code>启动nginx，再打开网址 <a href="http://127.0.0.1:8088/" target="_blank" rel="noopener">http://127.0.0.1:8088/</a> 可以看到nginx的欢迎页面，此时说明nginx启动成功。</p>
<h2 id="配置mysql数据库"><a href="#配置mysql数据库" class="headerlink" title="配置mysql数据库"></a>配置mysql数据库</h2><p><strong>1、创建数据库并导入数据</strong><br>Ubuntu系统自带了mysql5.7版本的数据库，在命令行root用户模式下输入mysql -uroot -p，提示输入密码，如果没有设置密码就只需要再按一次回车键，就可以进入，进入mysql后，输入<code>create database axf;</code>创建一个数据库，然后输入<code>use axf;</code>使用数据库，导入数据库将project目录下的axf.sql导入即可，即输入命令<code>source /home/project/axf.sql;</code>完成数据导入。</p>
<p><strong>2、给数据库设置密码</strong><br>导入数据完成后，需要给数据库设置密码，输入命令<code>use mysql;</code>，然后再输入命令<code>update user set authentication_string=PASSWORD(&quot;123456&quot;) where User=&#39;root&#39;;</code>设置密码，接着再输入命令<code>update user set plugin=&quot;mysql_native_password&quot;;</code>，最后刷新一次即可完成密码的设置。（注意：这里的数据库名称axf和数据库用户以及数据库密码需要与django项目中settings文件内的相对应）。</p>
<h2 id="安装uwsgi、django、pymysql"><a href="#安装uwsgi、django、pymysql" class="headerlink" title="安装uwsgi、django、pymysql"></a>安装uwsgi、django、pymysql</h2><p>Ubuntu系统默认安装了python3和python2，所以在使用pip（python的包管理器）安装python包时需要指定为python3，即在命令行中输入<code>pip3 install uwsgi</code>就可以安装uwsgi，同理，输入<code>pip3 install django</code>和<code>pip3 install pymysql</code>即可安装django和pymysql，这里的pymysql是python用来连接mysql数据库的一个包。</p>
<h2 id="创建uwsgi-ini配置文件（也可以是-xml等后缀）并启动项目"><a href="#创建uwsgi-ini配置文件（也可以是-xml等后缀）并启动项目" class="headerlink" title="创建uwsgi.ini配置文件（也可以是.xml等后缀）并启动项目"></a>创建uwsgi.ini配置文件（也可以是.xml等后缀）并启动项目</h2><p>在项目目录下创建project_uwsgi.ini文件，其内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line"># 指定项目执行的端口号（默认为8000）</span><br><span class="line">socket  = :8000</span><br><span class="line"># 指定运行目录（即项目的目录）</span><br><span class="line">chdir   = /home/project</span><br><span class="line"># 项目的wsgi文件相对于此文件的位置（在此文件所在目录下的project目录中的wsgi文件）</span><br><span class="line">module  = project.wsgi</span><br><span class="line"># 允许主进程存在</span><br><span class="line">master  = true</span><br><span class="line"># 开启的进程数量</span><br><span class="line">processes = 4</span><br><span class="line"># 当服务器退出的时候自动清理环境，删除unix socket文件和pid文件。</span><br><span class="line">vacuum    = true</span><br></pre></td></tr></table></figure></p>
<p>创建完配置文件后命令行输入命令<code>cd /home/project</code>进入project目录，然后输入<code>uwsgi --ini project_uwsgi.ini</code>启动项目。</p>
<h2 id="修改nginx-conf配置文件，连接uwsgi"><a href="#修改nginx-conf配置文件，连接uwsgi" class="headerlink" title="修改nginx.conf配置文件，连接uwsgi"></a>修改nginx.conf配置文件，连接uwsgi</h2><p>打开/etc/nginx/nginx.conf配置文件，添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    # 指定的是nginx代理uwsgi对外的端口号。</span><br><span class="line">    listen         8099; </span><br><span class="line">    # 指定服务器地址，这里指定为本机ip。</span><br><span class="line">    server_name    127.0.0.1 </span><br><span class="line">    charset UTF-8;</span><br><span class="line">    # 运行过程中出错时产生的日志文件的路径，</span><br><span class="line">    access_log      /var/log/nginx/project_access.log;</span><br><span class="line">    error_log       /var/log/nginx/project_error.log;</span><br><span class="line"></span><br><span class="line">    client_max_body_size 75M;</span><br><span class="line">    # 连接uwsgi，include必须为uwsgi_params，uwsgi_pass指定的端口号需要和project_uwsgi.ini中的保持一致。</span><br><span class="line">    location / &#123; </span><br><span class="line">        include uwsgi_params;</span><br><span class="line">        uwsgi_pass 127.0.0.1:8000;</span><br><span class="line">        uwsgi_read_timeout 2;</span><br><span class="line">    &#125;   </span><br><span class="line">    # 配置nginx访问静态文件，alias必须指定项目project中的static文件夹。</span><br><span class="line">    location /static &#123;</span><br><span class="line">        expires 30d;</span><br><span class="line">        autoindex on; </span><br><span class="line">        add_header Cache-Control private;</span><br><span class="line">        alias /home/project/static/;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>配置完成后输入<code>service nginx restart</code>重启nginx。</p>
<h2 id="修改python3下的django包中mysql的部分文件"><a href="#修改python3下的django包中mysql的部分文件" class="headerlink" title="修改python3下的django包中mysql的部分文件"></a>修改python3下的django包中mysql的部分文件</h2><p>在上面的配置全部完成后，还需要修改两个文件，即路径<code>/usr/local/lib/python3.6/dist-packages/django/db/backends/mysql</code>下的base.py和operations.py两个文件，否则可能会报错。<br>1、打开base.py文件，将以下代码注释掉：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if version &lt; (1, 3, 3):</span><br><span class="line">    raise ImproperlyConfigured(&quot;mysqlclient 1.3.3 or newer is required; you have %s&quot; % Database.__version__)</span><br></pre></td></tr></table></figure></p>
<p>原因可能是数据库版本太低或缺少数据库的客户端。<br>2、打开operations.py文件，将其中的query = query.decode(errors=’replace’)中的decode<br>换成encode，原因是python3中把decode方法去掉了，只能使用encode方法。</p>
<p><strong>在完成了以上步骤之后，在浏览器中输入网址 <a href="http://127.0.0.1:8099/home/" target="_blank" rel="noopener">http://127.0.0.1:8099/home/</a> ，打开网址并更改浏览器为手机模式，即可看到项目成功被打开，此时整个项目的部署就大功告成了。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/09/Linux常用命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/09/Linux常用命令/" itemprop="url">Linux常用命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-09T10:45:17+08:00">
                2019-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="cd（changedirectory）命令"><a href="#cd（changedirectory）命令" class="headerlink" title="cd（changedirectory）命令"></a>cd（changedirectory）命令</h2><p>切换当前目录到指定目录。</p>
<p><code>cd /</code>  进入根目录。</p>
<p><code>cd ~</code> 进入用户家目录，比如root用户就进入到/root，比如zzz用户，就进入到/home/zzz。</p>
<p><code>cd -</code>  进入上一次的工作目录。</p>
<p><code>cd ..</code>  进入上一级目录。</p>
<p><code>cd [绝对路径]</code> 进入绝对路径对应的目录。</p>
<p><code>cd [相对路径]</code> 在当前目录路径下对应的目录。</p>
<h2 id="ls（list）命令"><a href="#ls（list）命令" class="headerlink" title="ls（list）命令"></a>ls（list）命令</h2><p>通过ls 命令不仅查看linux文件夹包含的文件，文件权限(包括目录、文件夹、文件权限)以及目录信息等。</p>
<p> <code>ls</code> 列出当前文件夹下的文件和文件夹。</p>
<p> <code>ls -a</code> 列出目录所有文件，包含以.开始的隐藏文件。</p>
<p> <code>ls -A</code> 列出除.及..的其它文件。</p>
<p> <code>ls -r</code> 反序排列。</p>
<p> <code>ls -t</code> 以文件修改时间排序。</p>
<p> <code>ls -S</code> 以文件大小排序。</p>
<p> <code>ls -h</code> 以易读大小显示。</p>
<p> <code>ls -l</code> 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来。</p>
<p>注：参数与参数之间可以直接相连，中间不需要“-”。</p>
<h2 id="pwd（Print-Working-Directory）命令：查看当前路径。"><a href="#pwd（Print-Working-Directory）命令：查看当前路径。" class="headerlink" title="pwd（Print Working Directory）命令：查看当前路径。"></a>pwd（Print Working Directory）命令：查看当前路径。</h2><h2 id="mkdir（makedirectory）命令"><a href="#mkdir（makedirectory）命令" class="headerlink" title="mkdir（makedirectory）命令"></a>mkdir（makedirectory）命令</h2><p>创建文件夹。</p>
<p> <code>-m</code>  对新建目录设置存取权限。</p>
<p> <code>-p</code>   无论其中有些目录是否存在，都会创建该路径。</p>
<h2 id="rm（remove）命令"><a href="#rm（remove）命令" class="headerlink" title="rm（remove）命令"></a>rm（remove）命令</h2><p>删除一个目录中的一个或多个文件或目录。</p>
<p><code>-f</code>  强制删除。忽略不存在的文件，不提示确认。</p>
<p><code>-i</code>  在删除前需要确认。</p>
<p><code>-r</code>  指示rm将参数中列出的全部目录和子目录均递归地删除。</p>
<h2 id="rmdir（removedirectory）命令"><a href="#rmdir（removedirectory）命令" class="headerlink" title="rmdir（removedirectory）命令"></a>rmdir（removedirectory）命令</h2><p>从一个目录中删除一个或多个子目录项，但不能删除子目录。</p>
<p><code>-p</code>  如果删除后父目录是空的，则父目录也删除。</p>
<h2 id="mv（move）命令"><a href="#mv（move）命令" class="headerlink" title="mv（move）命令"></a>mv（move）命令</h2><p> 移动文件或修改文件名，根据第二参数类型（如目录，则移动文件；如为文件则重命名该文件）。如果第二参数为目录时移动多个文件时，文件之间用空格隔开。</p>
<p><code>-i</code>  如果文件已存在，询问是否覆盖。</p>
<p><code>mv * ../</code> 移动当前文件夹下的所有文件到上一级目录。</p>
<h2 id="cp（copy）命令"><a href="#cp（copy）命令" class="headerlink" title="cp（copy）命令"></a>cp（copy）命令</h2><p>将源文件复制至目标文件，或将多个源文件复制至目标目录。<br>注：命令行复制，如果目标文件已经存在会提示是否覆盖，而在shell脚本中，如果不加-i参数，则不会提示，而是直接覆盖。</p>
<p><code>-i</code>  提示。</p>
<p><code>-r</code>  复制目录及目录内所有项目。</p>
<p><code>-a</code> 复制的文件与原文件时间一样。</p>
<h2 id="which命令"><a href="#which命令" class="headerlink" title="which命令"></a>which命令</h2><p>which是在PATH就是指定的路径中，搜索某个系统命令的位置，并返回第一个搜索结果。使用which命令，就可以看到某个系统命令是否存在，以及执行的到底是哪一个位置的命令。<br> 注：which查找显示的是PATH中的命令，如cd等内建命令无法查找到。</p>
<p><code>-n</code>  指定文件名长度，指定的长度必须大于或等于所有文件中最长的文件名。</p>
<h2 id="whereis命令"><a href="#whereis命令" class="headerlink" title="whereis命令"></a>whereis命令</h2><p>whereis命令只能用于程序名的搜索，而且只搜索二进制文件（参数-b）、man说明文件（参数-m）和源代码文件（参数-s）。如果省略参数，则返回所有信息。</p>
<p><code>-b</code>   定位可执行文件。</p>
<p><code>-m</code>  定位帮助文件。</p>
<p><code>-s</code>   定位源代码文件。</p>
<p><code>-u</code>   搜索默认路径下除可执行文件、源代码文件、帮助文件以外的其它文件。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/08/win10在docker容器中通过Nginx部署网页/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/08/win10在docker容器中通过Nginx部署网页/" itemprop="url">win10在docker容器中通过Nginx部署网页</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-08T21:52:22+08:00">
                2019-04-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1、安装：直接到docker官网下载docker软件并安装。</p>
<p>2、运行：打开docker软件后，在命令行下即可执行命令创建容器，可以创建多个容器，各个容器是独立分开的。</p>
<p>3、docker常用命令</p>
<pre><code>docker run -p 8080:80 -v D:\hexo\source\html:/usr/share/nginx/html --name mynginx -d nginx
</code></pre><p>这个命令（run命令）是让docker运行一个名字叫mynginx的容器，并且将Windows中的文件映射到容器中指定位置。其中，<br><code>-p</code> 是指定端口映射的，冒号前是主机(宿主)端口容器端口，可以指定ip地址，默认是localhost，冒号后是容器端口。</p>
<p><code>-v</code> 是给容器挂载存储卷，挂载到容器的某个目录，冒号前是主机或其它容器中要挂载的文件的路径，冒号后是挂载到容器中的路径，这里的容器挂载路径是容器中<code>/etc/nginx/conf.d/default.conf</code>中第一个location后面的路径，也就是在用浏览器打开nginx欢迎页面时服务器访问的对应路径，如果路径不是这个，需要去该文件修改。</p>
<p>注：修改文件时需要用vim打开，可以在容器内通过<code>apt-get install vim</code>命令安装vim，如果报错就先执行<code>apt-get update</code>后再安装。</p>
<p><code>--name</code> 是指定容器的名称，如果没有该参数，会自动指定一个随机名称。</p>
<p><code>-d</code> 是指定后台运行容器并返回容器ID。</p>
<p><code>-it</code> 是以交互模式运行容器并为容器重新分配一个伪输入终端，一般不和<code>-d</code>一起使用。</p>
<p><code>docker exec -it mynginx bash</code>  以交互模式进入容器内，mynginx是要进入的容器名或者id。</p>
<p><code>docker ps</code>  列出所有当前运行的容器，后面可以加<code>-a</code>，意思是列出所有容器，无论是否运行，或者<code>-l</code>，意思是最近创建的容器。</p>
<p><code>docker port</code>  列出指定的容器的端口映射。</p>
<p><code>docker start/stop/restart</code>  分别是开始、停止、重启容器。</p>
<p><code>docker rm</code>  删除容器。</p>
<p><code>docker pause</code>  暂停容器中所有的进程。</p>
<p><code>docker unpause</code>  恢复容器中所有的进程。</p>
<p><code>docker create</code>  创建一个新的容器但不启动它。</p>
<p><code>docker images</code>  列出本地镜像，-a列出所有镜像。</p>
<p>4、在浏览器中打开127.0.0.1:8080或设置好的地址，就可以进入本地html目录下，在地址后加上网页的路径，即可使本地的文件在容器环境下经过服务器被打开。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/03/FFmpeg的用法以及python通过ffmpy控制FFmpeg操作视频的方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/03/FFmpeg的用法以及python通过ffmpy控制FFmpeg操作视频的方法/" itemprop="url">FFmpeg的用法以及python通过ffmpy控制FFmpeg操作视频的方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-03T08:53:16+08:00">
                2019-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="FFmpeg的常用命令和参数："><a href="#FFmpeg的常用命令和参数：" class="headerlink" title="FFmpeg的常用命令和参数："></a>FFmpeg的常用命令和参数：</h2><p>-i 输入的文件名或路径<br>-y 覆盖输出的同名文件<br>-vcodec和-acodec分别是指定视频解码器和音频解码器<br>-s 指定输出文件的分辨率<br>-r 指定输出文件的帧数<br>-b 指定压缩比特率<br>-an和-vn分别是表示不输出音频和视频<br>-ss 搜索到指定时间处<br>-f concat 表示输入的格式为concat格式，即filelist.txt中的格式，用来连接视频，用法为：</p>
<pre><code>ffmpeg -f concat -safe 0 -i filelist.txt -c copy output.mp4
</code></pre><p>其中-safe 0表示不检查filelist.txt中的文件格式，如果是绝对路径，则必须加上，如果是相对路径就不用，推荐加上。<br>-sn 取消字幕<br>-title    添加标题<br>-author 添加作者<br>-copyright 添加版权信息<br>-comment 添加评论</p>
<h2 id="ffmpy的安装调用"><a href="#ffmpy的安装调用" class="headerlink" title="ffmpy的安装调用"></a>ffmpy的安装调用</h2><p>在命令行下<code>pip install ffmpy3</code>即可安装，安装后在python下<code>import ffmpy</code>或<code>from ffmpy import FFmpeg</code> 导入包。<br>注：python调用FFmpeg实际上是通过ffmpy调用命令行，输入参数后通过命令行调用FFmpeg，和在命令行下使用FFmpeg一样。<br>ffmpy使用方法：<br>官方文档：<a href="https://ffmpy3.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://ffmpy3.readthedocs.io/en/latest/</a></p>
<pre><code>from ffmpy import FFmpeg
file = FFmpeg{
    inputs = {video.mp4:None,audio.mp4:None},
    outputs = {output.mp4:&apos;–vcodec copy –acodec copy&apos;}
}
print(file.cmd)
file.run()
</code></pre><p>上面的代码中，<code>print(file.cmd)</code>可以打印出在cmd中的命令，其结果为<br><code>ffmpeg –i video.mp4 –i audio.mp4 –vcodec copy –acodec copy output.mp4</code>，FFmpeg中的inputs传入的参数为键值对格式，键为命令行中-i后面的输入的文件名，值为输入文件对应的参数，一般是命令行-i前面的参数；ouputs传入的参数也为键值对格式，键为命令行中最终输出的文件名，值为输出的文件对应的参数，一般是命令行中输入文件和输出文件之间的参数，file.run()为执行命令。<br>例如：分离出视频中视频部分并去除音频的命令行写法为：<br><code>ffmpeg -i input.mp4 -vcodec copy -an output.mp4</code><br>在python中的用法为：</p>
<pre><code>FFmpeg{
    inputs = {input.mp4:None},
    outputs = {output.mp4:&apos;–vcodec copy -an&apos;}
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/21/CSS网页布局基本属性/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/21/CSS网页布局基本属性/" itemprop="url">CSS网页布局基本属性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-21T20:40:40+08:00">
                2019-02-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="css盒子模型"><a href="#css盒子模型" class="headerlink" title="css盒子模型"></a>css盒子模型</h2><p>css盒子模型包含了元素内容（content）、内边距（padding）、边框（border）、外边距（margin）几个要素。<br>内边距是指元素内容与边框的距离，边框（border）有宽度属性，外边距是指边框与其它盒子模型或网页body的距离。内外边距在使用时按照上（top）、右（right）、下（bottom）、左（left）分别赋值。</p>
<p>外边距合并：两个上下方向相邻的元素框垂直相遇时，外边距会合并，合并后的外边距的高度等于两个发生合并的外边距中较高的那个边距值。</p>
<p>box-sizing : content-box|border-box|inherit，box-sizing是用户界面属性里的一种，跟盒子模型有关，在css reset中有可能会用到它。</p>
<p>content-box ,默认值，可以使设置的宽度和高度值应用到元素的内容框。盒子的width只包含内容。<br>即总宽度=margin+border+padding+width。</p>
<p>border-box , 设置的width值其实是除margin外的border+padding+element的总宽度。盒子的width包含border+padding+内容。即总宽度=margin+width。很多CSS框架，都会对盒子模型的计算方法进行简化。</p>
<p>inherit ,规定应从父元素继承 box-sizing 属性的值。</p>
<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>position有absolute、relative、fixed三个常用属性值，absolute是指生成绝对定位的元素，相对于 static 定位以外的第一个父元素进行定位；relative是指生成相对定位的元素，相对于其正常位置进行定位；fixed是指生成绝对定位的元素，相对于浏览器窗口进行定位，鼠标滚动时，元素始终与窗口保持固定的距离。</p>
<h2 id="display"><a href="#display" class="headerlink" title="display"></a>display</h2><p>display常用的属性值有none、block、inline、inline-block，none：此元素不会被显示；block：此元素将显示为块级元素，此元素前后会带有换行符，使用block时元素后会换行；inline：默认，此元素会被显示为内联元素，元素前后没有换行符；inline-block    行内块元素，相当于一行内的一个块元素，元素高度会增大至行高。</p>
<h2 id="float"><a href="#float" class="headerlink" title="float"></a>float</h2><p>float 定义元素在哪个方向浮动，float可以控制同一等级下之后的所有元素都向该方向浮动，后面的元素会逐一朝一个方向挨着，当空间不够时就进入下一行。</p>
<h2 id="z-index"><a href="#z-index" class="headerlink" title="z-index"></a>z-index</h2><p>z-index可以控制页面元素在z轴方向上的前后，数值大的元素在上面，数值小的元素在下面。</p>
<h2 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h2><p>clear：both可以用来清除同一等级的前面的第一个float的效果。</p>
<p>css样式中background有许多相关属性，background-image：url(“图片路径”)，可以插入一个背景图；background-repeat可以控制图片大小在小于元素大小时是否重复；background-size可以调整图片大小，如cover是指覆盖整个元素内容，contain是指窗口包含整个图片，会自动调节图片大小。css中使用position的时候一般不使用盒子模型中的一些属性来控制距离，而是直接使用top、right、bottom、left等属性。</p>
<p>css样式中一般要使用一个固定的reset样式来将浏览器默认的一些样式修改为最原始的状态。可以在网上找reset样式，然后放到项目的css文件夹中，再在html文件中调用reset即可。</p>
<p>css样式border属性的相关用法，border-style可以设置边框样式，常用的有solid；border-width可以调整边框的宽度；border-radius可以添加边框的圆角属性，数值越大圆角越大；border-color可以设置边框颜色。</p>
<p>css样式中font的相关属性，font-family设置字体，后面可以直接跟上字体名称；font-size设置字的大小，数值越大字体越大；font-height设置行高；font-weight可以设置字体的粗细程度，如bold是粗，light是细。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/15/git-for-window使用方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/15/git-for-window使用方法/" itemprop="url">git for window使用方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-15T19:23:34+08:00">
                2019-02-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="配置git-for-windows并创建SSH-keys"><a href="#配置git-for-windows并创建SSH-keys" class="headerlink" title="配置git for windows并创建SSH keys"></a>配置git for windows并创建SSH keys</h2><p>1、git for windows 使用前需要先注册github账号，新建一个repository，使用SSH来建立连接；</p>
<p>2、安装好git for windows后在git bash中输入<code>ssh-keygen -t rsa -C &quot;your_email@example.com&quot;</code>，运行后会让你输入文件名来保存SSH key的代码，以及密码（该密码是你push文件的时候要输入的密码），可以直接按回车键跳过，则会在本地电脑用户的目录下生成一个.ssh文件夹，其中包含了 id_rsa 和 id_rsa.pub 两个秘钥文件；</p>
<p>3、打开id_rsa.pub文件，并复制里面的内容（也可以用git命令复制该文件的内容，如<code>clip &lt; ~/.ssh/id_rsa.pub</code>），然后登录你的github账号，从右上角的设置（ Account Settings ）进入，然后点击菜单栏的 SSH key 进入页面添加 SSH key，最后把内容粘贴到key对应的框内，点击add SSH key即可成功建立SSH连接。</p>
<h2 id="git常用语法"><a href="#git常用语法" class="headerlink" title="git常用语法"></a>git常用语法</h2><p><img src="/images/git.png" alt="git基本原理图"></p>
<p>git init 初始化当前目录，会在当前目录（工作区）下新建一个隐藏的.git文件夹，主要用于版本控制，也称为版本库，里面的文件index是一个暂存区。</p>
<p>git add .  添加所有文件的修改到暂存区，“.”代表当前目录下所有文件。<br>git commit -m ‘任意命名，用于区别每一次提交’  提交更改，实际上就是把暂存区的所有内容提交到当前分支。</p>
<p>git status 查看状态，可以看到是否对文件进行了更改，以及哪些文件被更改了。</p>
<p>git remote add/remove origin (url)  远程添加或删除远程仓库，origin是默认的仓库名，可以改为任意名称，url是SSH对应的地址，url只有在添加时才需要使用，当移除时或push调用时不需要用到url。</p>
<p>git remote -v 查看远程添加的仓库，v是view的简写，意思是查看。</p>
<p>git log  显示当前分支的版本历史。</p>
<p>git push/pull origin master 将本地commit的代码上传到远程版本库中或从远程版本库中下载到本地资源库中，origin和上面的remote中的origin对应，master代表一个分支点。</p>
<p>git clone url 将文件从远端的地址克隆到本地中。</p>
<p>git branch 查看当前的分支在哪个位置。</p>
<p>git checkout  当后面跟上分支名称时可以跳转到那个分支，当后面跟上版本号时可以恢复到那个版本。</p>
<p><strong>注：</strong>.gitignore中可以添加需要忽略的文件或目录，这样在提交更改时就会自动忽略对应的文件和目录。</p>
<p>当使用git log查看分支版本历史时，使用上下箭头可以翻看所有版本历史，按q可以退出。</p>
<p>当上传发生冲突时，需要先用pull命令把远端的更改下载到本地资源库，对比冲突，确定一个版本后再重新上传。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/26/Python-各种推导式用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/26/Python-各种推导式用法/" itemprop="url">Python 各种推导式用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-26T18:36:41+08:00">
                2019-01-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>python的推导式包括列表推导式、字典推导式和集合推导式</strong></p>
<h2 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h2><p>列表推导式的书写形式一般为：[表达式 for 变量 in 列表]  或者  [表达式 for 变量 in 列表 if 条件]<br>其中表达式可以包含多个变量或元素，后面跟上一个for语句的循环，对列表、元组或集合等序列进行遍历，当需要筛选序列中的元素时可以用if条件语句进行判断，if语句可以有多个，代表多个条件。<br>例：</p>
<pre><code>list0 =  [x**2 for x in range(10)]
</code></pre><p>x**2是包含一个变量的表达式，后面跟上一个for语句对range(10)进行遍历，得到的是<code>list0=[1, 4, 9, 16, 25, 36, 49, 64, 81]</code>。</p>
<pre><code>list1 = [x**2 for x in range(10) if x&gt;5]
</code></pre><p>这里对遍历得到的每个x的值进行判断，当满足条件时才会代入表达式中，得到的是<code>list1=[36, 49, 64, 81]</code>。</p>
<pre><code>list2 = [(x, y) for x in range(10) if x % 2 if x &gt; 3 for y in range(10) if y &gt; 7 if y != 8]
</code></pre><p>(x,y)这个表达式包含两个变量，则后面需要用两个for语句分别获得x,y的值，每个变量有两个条件进行限制，得到的是<code>list2=[(5, 9), (7, 9), (9, 9)]</code>。</p>
<p><strong>注：当把列表推导式的[]符号更换为()时得到的结果是一个生成器</strong></p>
<h2 id="字典推导式"><a href="#字典推导式" class="headerlink" title="字典推导式"></a>字典推导式</h2><p>字典推导式和列表推导式类似，只是字典推导式的表达式形式是键值对的形式，使用的括号是花括号{}。<br>例：</p>
<pre><code>m = {&quot;a&quot;:1, &quot;b&quot;:2, &quot;c&quot;:3, &quot;d&quot;:4}
dict0={v:k for k,v in m.items()}
</code></pre><p>这个推导式可以将字典m的键和值互相调换，得到的是<code>dict0={1: &#39;a&#39;, 2: &#39;b&#39;, 3: &#39;c&#39;, 4: &#39;d&#39;}</code></p>
<h2 id="集合推导式"><a href="#集合推导式" class="headerlink" title="集合推导式"></a>集合推导式</h2><p>集合推导式跟列表推导式也是类似的,它的区别在于它使用的是花括号{}，由于集合具有唯一性，所以得到的集合中没有重复的元素。<br>例：</p>
<pre><code>s = {i*2 for i in [1,1,2]}
</code></pre><p>结果为<code>s = {2,4}</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/17/Python-第三方库requests常用用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnjgh">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johnjgh's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/17/Python-第三方库requests常用用法/" itemprop="url">Python 第三方库requests常用用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-17T09:24:18+08:00">
                2019-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h2><pre><code>response =requests.get(url,params,headers,cookies,timeout)
</code></pre><p>其中url是请求的网页地址，params可以传递参数，一般是字典的数据格式，headers是请求头，也是字典的格式，一般包含UA信息（User-Agent）和Referer（防盗链）。timeout是设置超时的时间。</p>
<p>response.text  返回headers中的编码解析的结果</p>
<p>response.content 返回二进制结果</p>
<p>response.json() 返回JSON格式，等同于json.loads（response.text）方法，可能抛出异常。</p>
<p>response.status_code 返回获取网页时的状态码，200为正常访问。</p>
<p>response.raw 返回原始socket respons，需要加参数stream=True。</p>
<p>response.encoding 可以定义网页的编码方式</p>
<h2 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h2><pre><code>response = requests.post(url,data,files)
</code></pre><p>url是提交请求的网址，data是一个字典形式的数据表单，files是在文件上传时使用的，需要传入一个类似于{‘files’:open(文件路径,mode)}的字典。</p>
<h2 id="会话保持（session）"><a href="#会话保持（session）" class="headerlink" title="会话保持（session）"></a>会话保持（session）</h2><p>cookies的一个作用就是可以用于模拟登陆，做会话维持，而使用session可以将cookies信息保存下来，下次请求时就不需要再次传入cookies。</p>
<pre><code>session = requests.Session()
</code></pre><p><code>session.get(url)</code> 将网页的cookies信息传入session中，下次访问网页时会自动传入cookies。</p>
<h2 id="证书验证"><a href="#证书验证" class="headerlink" title="证书验证"></a>证书验证</h2><p>在<code>requests.get(url,verify)</code>中verify默认是True，可以设为False，会跳过证书验证，也可以设为一个证书路径，则会验证该指定证书。</p>
<h2 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h2><pre><code>proxies = {
    &quot;http&quot;: &quot;http://user:password@127.0.0.1:9743/&quot;,
    &quot;https&quot;: &quot;https://user:password@127.0.0.1:9743&quot;,
}
</code></pre><p>当需要用户名和密码时就要添加“user:password@”这一段，如果不需要密码，则去除这一段。<br>通过<code>response = requests.get(url, proxies=proxies)</code>使用代理ip来访问网页。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Johnjgh</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Johnjgh</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
